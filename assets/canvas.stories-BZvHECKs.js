import{G as D}from"./index-YZ2RfsvY.js";import"./HTMLText-DZ17wCYg.js";import"./_commonjsHelpers-BosuxZz1.js";import"./pixi_viewport-B8H46PgQ.js";async function k(o){try{const t=await fetch(o);if(!t.ok)throw new Error("Network response was not ok");return await t.json()}catch(t){throw new Error("Error reading JSON file: "+t.message)}}async function x(){try{const t=await k("/src/stories/datasets/miserables/miserables.json");return console.log("JSON data:",t),t}catch(o){return console.error("Error reading JSON file:",o),null}}const T=o=>(o.nodes.forEach(t=>{t.shape="circle",t.label=t.id,t.type="Something",t.shape="circle"}),o.links.forEach(t=>{t.id=`${t.source}-${t.target}`}),o),O=[{id:"1",label:"Ravi",type:"Person",shape:"circle"},{id:"2",label:"GraphCanvas",type:"Project",shape:"circle"},{id:"3",label:"TestNode",type:"Test 1",shape:"circle"},{id:"4",label:"TestNode",type:"Test 2",shape:"circle"}],z=[{id:"1-2",source:"1",target:"2"}],M=o=>{function t(d,l){return Math.floor(Math.random()*(l-d)+d)}const n=o.stateCtrl.nodes.size+1;console.log("===nodeId =====",n);const r=[{id:n.toString(),label:"TestNode",type:`Test ${n}`,shape:"circle"}],c=[];return n>4?[1,2].forEach(()=>{const d=t(1,o.stateCtrl.nodes.size);c.push({id:`${d}-${n}`,source:d.toString(),target:n.toString()})}):c.push({id:`1-${n}`,source:"1",target:n.toString()}),console.log("==nodes, links",r,c),{nodes:r,links:c}},S=()=>{const o=document.createElement("div"),t=document.createElement("canvas");t.style.width="100vw",t.style.height="100vh",o.appendChild(t);const n=document.createElement("div");n.classList.add("eventbar"),n.style.top="60px",n.style.left="10px",n.style.maxHeight="855px",n.style.width="300px",n.style.position="absolute",n.style.overflowY="hidden",o.appendChild(n);const r=document.createElement("div");r.classList.add("toolbar"),r.style.top="10px",r.style.left="10px",r.style.position="absolute";const c=document.createElement("button");c.innerHTML="Add dummy data",c.style.marginRight="30px",r.appendChild(c);const d=document.createElement("button");d.innerHTML="redraw",r.appendChild(d);const l=document.createElement("button");l.innerHTML="zoom in",r.appendChild(l);const p=document.createElement("button");p.innerHTML="zoom out",r.appendChild(p);const v=document.createElement("button");v.innerHTML="fitView",r.appendChild(v);const C=document.createElement("button");C.innerHTML="Debug ON",r.appendChild(C);const h=document.createElement("button");h.innerHTML="Debug OFF",r.appendChild(h);const g=document.createElement("button");g.innerHTML="ReDoLayout",r.appendChild(g);const y=document.createElement("button");y.innerHTML="DataSet 1",r.appendChild(y),o.appendChild(r);const a=b=>{const s=document.createElement("div");s.innerHTML=`fired - ${b}`,s.style.borderBottom="2px solid #999",s.style.padding="10px ",s.style.marginBottom="5px",s.style.background="#000",s.style.opacity="0.5",s.style.width="200px",s.style.color="white",n.prepend(s),setTimeout(function(){n.removeChild(s)},3e3)};return document.addEventListener("DOMContentLoaded",function(b){console.log("=DOM is ready",b);const s={canvas:{containerDiv:t,backgroundColor:2763822}},e=new D(s);e.addData(O,z),c.onclick=function(){const{nodes:i,links:m}=M(e);e.addData(i,m)},d.addEventListener("click",()=>{e.canvasCtrl.fitView(),e.canvasCtrl.renderer.rerender()}),l.addEventListener("click",()=>e.canvasCtrl.zoomIn()),p.addEventListener("click",()=>e.canvasCtrl.zoomOut()),v.addEventListener("click",()=>e.canvasCtrl.fitView()),h.addEventListener("click",()=>{e.canvasCtrl.debugOff(),e.canvasCtrl.renderer.rerender()}),C.addEventListener("click",()=>{e.canvasCtrl.debugOn(),e.canvasCtrl.renderer.rerender()}),g.addEventListener("click",()=>{e.canvasCtrl.layout.reDoLayout(),e.canvasCtrl.renderer.rerender()}),y.addEventListener("click",()=>{x().then(i=>{console.log("Returned data:",i),e.canvasCtrl.clear(),e.canvasCtrl.stateCtrl.clearAll();const{nodes:m,links:f}=T(i);console.log("convert2CanvasData",m,f),e.addData(m,f)})}),e.canvasCtrl.camera.on("clicked",()=>{a("clicked"),console.log("clicked - state",e.stateCtrl.getNodes(),e.stateCtrl.getLinks())}),e.canvasCtrl.camera.on("drag-start",()=>a("drag-start")),e.canvasCtrl.camera.on("drag-end",()=>a("drag-end")),e.canvasCtrl.camera.on("pinch-start",()=>a("pinch-start")),e.canvasCtrl.camera.on("pinch-end",()=>a("pinch-end")),e.canvasCtrl.camera.on("bounce-start-x",()=>a("bounce-start-x")),e.canvasCtrl.camera.on("bounce-end-x",()=>a("bounce-end-x")),e.canvasCtrl.camera.on("bounce-start-y",()=>a("bounce-start-y")),e.canvasCtrl.camera.on("bounce-end-y",()=>a("bounce-end-y")),e.canvasCtrl.camera.on("snap-start",()=>a("snap-start")),e.canvasCtrl.camera.on("snap-end",()=>a("snap-end")),e.canvasCtrl.camera.on("snap-zoom-start",()=>a("snap-zoom-start")),e.canvasCtrl.camera.on("snap-zoom-end",()=>a("snap-zoom-end")),e.canvasCtrl.camera.on("mouse-edges-start",()=>a("mouse-edges-start")),e.canvasCtrl.camera.on("mouse-edges-end",()=>a("mouse-edges-end")),e.canvasCtrl.camera.on("moved-end",()=>a("moved-end")),e.canvasCtrl.camera.on("zoomed-end",()=>a("zoomed-end")),e.canvasCtrl.camera.on("pointerover",()=>a("pointerover")),e.canvasCtrl.camera.on("pointerout",()=>a("pointerout"))},!1),o},P={title:"Graph/Canvas",render:()=>S(),parameters:{layout:"fullscreen"}},u={};var E,L,w;u.parameters={...u.parameters,docs:{...(E=u.parameters)==null?void 0:E.docs,source:{originalSource:"{}",...(w=(L=u.parameters)==null?void 0:L.docs)==null?void 0:w.source}}};const R=["Default"];export{u as Default,R as __namedExportsOrder,P as default};

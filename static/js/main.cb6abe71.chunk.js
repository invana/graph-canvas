(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,a){},156:function(e,t,a){},158:function(e,t,a){},225:function(e){e.exports={edges:[{id:4,label:"has_spouse",source:1,target:2,properties:{married_since:"2020"}},{id:5,label:"has_spouse",source:2,target:1,properties:{married_since:"2020"}},{id:6,label:"has_child",source:1,target:3},{id:7,label:"has_child",source:2,target:3},{id:8,label:"married_to",source:1,target:2,properties:{since:"2020"}},{id:9,label:"married_to",source:2,target:1,properties:{since:"2020"}},{id:10,label:"authored",source:1,target:35,properties:{since:"2020"}}],nodes:[{id:1,label:"Person",properties:{name:"Ravi"}},{id:2,label:"Person",properties:{name:"Roja"}},{id:3,label:"Person",properties:{name:"Rinku"}},{id:35,label:"Project",properties:{name:"Invana Studio"}}]}},226:function(e){e.exports={layoutSettings:{type:"dagre",options:{}},nodeDisplaySettings:{Person:{nodeSize:30,nodeIcon:"user",nodeColor:"#ff0000",labelPropertyKey:"name"},Project:{nodeIcon:"company",labelPropertyKey:"name"}},edgeDisplaySettings:{has_child:{edgeColor:"#b6961c",labelPropertyKey:"name"}},showDisplaySettings:!1,messageText:"Welcome to graph canvas (beta).",selectedNodes:[],hoveredItem:null}},231:function(e,t,a){e.exports=a(401)},240:function(e,t,a){},243:function(e,t,a){},245:function(e,t,a){},252:function(e,t,a){},401:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),o=a(218),s=a(16),r=a(26),i=a(54),c=a(197),d=a(40),m=a(412),u=a(413),p=(a(238),a(240),function(e){var t=e.item.get("model");if(console.log("model",t),t){var a=t.style.keyshape.stroke;return l.a.createElement("div",{className:"contextMenu",style:{borderTopColor:a}},l.a.createElement("h4",{style:{color:a}},t.style.icon?l.a.createElement("span",{className:"icon-foo",style:{fontFamily:t.style.icon.fontFamily}},t.style.icon.value):l.a.createElement("span",null),t.label," "),l.a.createElement("p",{className:"small border-bottom pb-2 mb-0"},"ID: ",t.id),l.a.createElement("div",{className:"properties"},l.a.createElement("div",{className:"header text-uppercase mb-2 p-2 "},"Properties"),l.a.createElement("div",{className:"body"},Object.keys(t.properties||{}).map(function(e,a){if(t)return l.a.createElement("div",{className:"propertyItem border-bottom pb-1 "},l.a.createElement("h6",{className:"mb-1"},e," :"),l.a.createElement("p",{className:"mb-1"},t.properties[e]))}))))}return l.a.createElement("div",null)}),g=a(52).a.getNodeStyleByTheme({nodeSize:40,primaryColor:"green",mode:"dark"}),y={size:[250,150]},h=(a(156),a(47)),f=a(160),E=a(416);a(158);var v=function(e){console.log("ShowSelectedNodes props",e);var t=Object(n.useContext)(h.a),a=t.graph,o=t.apis,s=e.selectedNodes,r=e.stateManager;return Object(n.useEffect)(function(){console.log("ShowSelectedNodes useEffect");var e=function(e){console.log("handleSelectChanged",e.selectedItems);var t=e.selectedItems.nodes;t.length!==s.length&&r.setSelectedNodes(t)},t=function(e){console.log("handleStateChanged",e.selectedItems);var t=a.findAllByState("node","selected");r.setSelectedNodes(t)};return a.on("nodeselectchange",e),a.on("afteritemstatechange",t),function(){a.off("nodeselectchange",e),a.off("afteritemstatechange",t)}},[]),l.a.createElement("div",{className:"selectedNodes",style:e.style},s.map(function(e){var t=e.get("model");if(console.log("model+++",t),t)return l.a.createElement(f.a,{className:"me-3 selectedNode",size:"sm",onClick:function(){return function(e){r.focusOnNode(o,e)}(e)},style:{borderColor:t.style.keyshape.stroke,color:t.style.keyshape.stroke},variant:"outline-secondary",key:t.id},t.style.icon?l.a.createElement("span",{className:"icon-foo me-1",style:{fontFamily:t.style.icon.fontFamily}},t.style.icon.value):l.a.createElement("span",null),t.style.label.value.toString(),l.a.createElement(E.a,{className:"ms-1",onClick:function(){return function(e){console.log("removeActiveNode",e),a.setItemState(e,"selected",!1)}(e)},style:{top:"-2px",position:"relative"}}))}))};a(243);var b=function(e){var t=e.selectedNodes[0]?1==e.selectedNodes.length:null;return l.a.createElement("div",{className:"graphin-components-footer",style:e.style},l.a.createElement("div",{className:"statusMessage float-start pt-1"},l.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.messageText}})),l.a.createElement("div",{className:"nodeSettings float-end"},t&&l.a.createElement("div",null,"node settings here")))},S=(a(245),[{type:"graphin-force",label:"graphin-force"},{type:"grid",label:"grid",preventOverlap:!0,preventOverlapPadding:20,workerEnabled:!0},{type:"circular",label:"circular",options:{}},{type:"radial",label:"radial",options:{center:[0,0],linkDistance:150,maxIteration:1e3,focusNode:"node11",unitRadius:100,preventOverlap:!0,nodeSize:30,strictRadial:!1,workerEnabled:!1}},{type:"force",label:"force",preventOverlap:!0,linkDistance:50,nodeStrength:30,edgeStrength:.8,collideStrength:.8,nodeSize:30,alpha:.9,alphaDecay:.3,alphaMin:.01,onTick:function(){console.log("ticking")},onLayoutEnd:function(){console.log("force layout done")}},{type:"gForce",label:"gForce",linkDistance:150,nodeStrength:30,edgeStrength:.1,nodeSize:30,onTick:function(){console.log("ticking")},onLayoutEnd:function(){console.log("force layout done")},workerEnabled:!1,gpuEnabled:!1},{type:"concentric",label:"concentric",maxLevelDiff:.5,sortBy:"degree"},{type:"dagre",label:"dagre",rankdir:"LR"},{type:"fruchterman",label:"fruchterman"}]),N=function(e,t,a){var n=e.apis,l=e.graph,o=n.handleZoomIn,s=n.handleZoomOut,r=t.key;if("zoomIn"===r)s();else if("zoomOut"===r)o();else if("add-data"===r)l.addItem("node",{id:"node2",label:"node2",x:300,y:150}),l.layout();else if(r.endsWith("-layout")){var i=S.find(function(e){return e.type===r.replace("-layout","")});a.setLayoutSettings(i)}else if("screenshot"===r)console.log("Screenshow "),!0===a.showExportCanvas?a.setExportCanvas(!1):a.setExportCanvas(!0);else if("fit-center"===r)l.fitView();else if("canvas-clear"===r)l.clear();else if("canvas-redraw"===r){var c=l.get("autoPaint");l.setAutoPaint(!1),l.render(),l.paint(),l.setAutoPaint(c),l.fitCenter()}else"display-settings"===r?!0===a.showDisplaySettings?a.setShowDisplaySettings(!1):a.setShowDisplaySettings(!0):"find-and-focus"===r&&(!0===a.showFindAndFocus?a.setShowFindAndFocus(!1):a.setShowFindAndFocus(!0))},k=a(17),x=a(25),w=function(){function e(t,a,n){Object(k.a)(this,e),this.type=null,this.message=null,this.state=null,this.created_at=null,this.created_at=new Date,this.type=t,this.message=a,this.state=n}return Object(x.a)(e,[{key:"commit",value:function(){return console.debug('event created type="'.concat(this.type,'" message="').concat(this.message,'"')),this}}]),e}(),O=new function e(){Object(k.a)(this,e),this.welcome="WELCOME",this.updateLayout="LAYOUT_UPDATE"},D=function(){function e(t,a,n,l,o,s,r,i,c,d,m,u,p,g,y,h,f,E){Object(k.a)(this,e),this.setLayoutSettings_=null,this.setSelectedNodes=null,this.setMessageText=null,this.setHoveredItem=null,this.setShowDisplaySettings=null,this.setNodeDisplaySettings=null,this.setEdgeDisplaySettings=null,this.setShowFindAndFocus=null,this.setExportCanvas=null,this.layoutSettings=null,this.selectedNodes=null,this.messageText=null,this.hoveredItem=null,this.showDisplaySettings=null,this.nodeDisplaySettings=null,this.edgeDisplaySettings=null,this.showFindAndFocus=null,this.showExportCanvas=null,this.setLayoutSettings_=t,this.setSelectedNodes=a,this.setMessageText=n,this.setHoveredItem=l,this.setShowDisplaySettings=o,this.setNodeDisplaySettings=s,this.setEdgeDisplaySettings=r,this.setShowFindAndFocus=i,this.setExportCanvas=c,this.layoutSettings=d,this.selectedNodes=m,this.messageText=u,this.hoveredItem=p,this.showDisplaySettings=g,this.nodeDisplaySettings=y,this.edgeDisplaySettings=h,this.showFindAndFocus=f,this.showExportCanvas=E}return Object(x.a)(e,[{key:"setLayoutSettings",value:function(e){console.log("setLayoutSettings",e);var t=new w(O.updateLayout,"Updated to ".concat(e.label," layout"),e).commit();this.setMessageText(t.message),this.setLayoutSettings_(e)}},{key:"focusOnNode",value:function(e,t){e.focusNodeById(t.getID()),t.toFront()}}]),e}();var C=function(e){console.log("ShowSelectedNodes props",e);var t=Object(n.useContext)(h.a),a=t.graph,o=(t.apis,function(e){return"<strong>".concat(e.label,"</strong>[id:").concat(e.id,"]")});return Object(n.useEffect)(function(){var t=function(t){var a=t.item.get("model");e.stateManager.setHoveredItem(t.item),e.stateManager.setMessageText("Hovered on Node: ".concat(o(a)))},n=function(t){e.stateManager.setHoveredItem(null),e.stateManager.setMessageText(null)},l=function(t){var a=t.item.get("model");console.log("====model",a),e.stateManager.setHoveredItem(t.item),e.stateManager.setMessageText("Hovered on Edge: ".concat(o(a)))},s=function(t){e.stateManager.setHoveredItem(null),e.stateManager.setMessageText(null)};return a.on("node:mouseenter",t),a.on("node:mouseleave",n),a.on("edge:mouseenter",l),a.on("edge:mouseleave",s),function(){a.off("node:mouseenter",t),a.off("node:mouseleave",n),a.off("edge:mouseenter",l),a.off("edge:mouseleave",s)}},[]),l.a.createElement("div",null)},I=a(417),F=a(418),j=a(419),M=(a(138),a(56)),T=a(55),P=[{key:"find-and-focus",name:l.a.createElement(M.a,{placement:"bottom",overlay:l.a.createElement(T.a,{id:"tooltip-screenshot"},"Find and focus node in the canvas")},l.a.createElement(I.a,null))},{key:"space-4",name:l.a.createElement("div",{className:"divider"})},{key:"screenshot",name:l.a.createElement(M.a,{placement:"bottom",overlay:l.a.createElement(T.a,{id:"tooltip-screenshot"},"Export canvas")},l.a.createElement(F.a,null))},{key:"space-5",name:l.a.createElement("div",{className:"divider"})},{key:"display-settings",name:l.a.createElement(M.a,{placement:"bottom",overlay:l.a.createElement(T.a,{id:"tooltip-display-settings"},"Display Settings")},l.a.createElement(j.a,null))}],L=a(420),z=a(421),A=a(422),H=a(423),_=a(424),B=a(425),R=a(426),K=a(427),J=a(428),Z=[{key:"canvas-clear",name:l.a.createElement(M.a,{placement:"bottom",overlay:l.a.createElement(T.a,{id:"tooltip-clear"},"Clear Canvas")},l.a.createElement(L.a,null))},{key:"canvas-redraw",name:l.a.createElement(M.a,{placement:"bottom",overlay:l.a.createElement(T.a,{id:"tooltip-redraw"},"Redraw Canvas")},l.a.createElement(z.a,null))},{key:"space-2",name:l.a.createElement("div",{className:"divider"})},{key:"zoomOut",name:l.a.createElement(M.a,{placement:"bottom",overlay:l.a.createElement(T.a,{id:"tooltip-zoomOut"},"Zoom out")},l.a.createElement(A.a,null))},{key:"zoomIn",name:l.a.createElement(M.a,{placement:"bottom",overlay:l.a.createElement(T.a,{id:"tooltip-zoomIn"},"Zoom In")},l.a.createElement(H.a,null))},{key:"fit-center",name:l.a.createElement(M.a,{placement:"bottom",overlay:l.a.createElement(T.a,{id:"tooltip-fit-center"},"Fit to view")},l.a.createElement(_.a,null))},{key:"space-1",name:l.a.createElement("div",{className:"divider"})},{key:"gForce-layout",name:l.a.createElement(M.a,{placement:"bottom",overlay:l.a.createElement(T.a,{id:"tooltip-gForce"},"gForce Layout")},l.a.createElement(B.a,null))},{key:"circular-layout",name:l.a.createElement(M.a,{placement:"bottom",overlay:l.a.createElement(T.a,{id:"tooltip-circular"},"Circular Layout")},l.a.createElement(R.a,null))},{key:"grid-layout",name:l.a.createElement(M.a,{placement:"bottom",overlay:l.a.createElement(T.a,{id:"tooltip-grid"},"Grid Layout")},l.a.createElement(K.a,null))},{key:"dagre-layout",name:l.a.createElement(M.a,{placement:"bottom",overlay:l.a.createElement(T.a,{id:"tooltip-dagre"},"Dagre Layout")},l.a.createElement(J.a,null))}],W=a(415),G=a(248),U=a(414);var V=function(e){var t=Object(n.useContext)(h.a);return t.apis,t.graph,l.a.createElement("div",{className:"rightModal  bg-white",style:e.style},l.a.createElement(W.a,null,l.a.createElement(W.a.Header,null,"Node display settings"),l.a.createElement(W.a.Body,{className:""},l.a.createElement(W.a.Text,null,Object.keys(e.nodeDisplaySettings).map(function(t,a){var n=e.nodeDisplaySettings[t];if(n)return l.a.createElement("div",{className:"propertyItem border-bottom pb-1 "},l.a.createElement("h6",{className:"mb-1"},t," :"),l.a.createElement(G.a,{controlId:"nodeDisplayFloatingTextarea",label:"Node Display config",className:"mb-3"}," ",l.a.createElement(U.a.Control,{style:{minHeight:"130px"},as:"textarea",placeholder:"add node display config here",value:JSON.stringify(n,null,2)})))})))),l.a.createElement(W.a,null,l.a.createElement(W.a.Header,null,"Edge display settings"),l.a.createElement(W.a.Body,{className:""},l.a.createElement(W.a.Text,null,Object.keys(e.edgeDisplaySettings).map(function(t,a){var n=e.edgeDisplaySettings[t]||{};if(n)return l.a.createElement("div",{className:"propertyItem border-bottom pb-1 "},l.a.createElement("h6",{className:"mb-1"},t," :"),l.a.createElement(G.a,{controlId:"edgeDisplayFloatingTextarea",label:"edge Display config",className:"mb-3"}," ",l.a.createElement(U.a.Control,{style:{minHeight:"130px"},as:"textarea",placeholder:"update edge display config here",value:JSON.stringify(n,null,2)})))})))))},Y=(a(252),a(224)),q=d.a.registerFontFamily(Y.a);var Q=function(e){for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);for(var n="#",l=0;l<3;l++){n+=("00"+(t>>8*l&255).toString(16)).substr(-2)}return n},X=function(e,t){return e.originalId=e.id,e.id=e.id.toString(),e.style=function(e,t){var a=e.label,n=t&&t.nodeColor?t.nodeColor:Q(a),l=t&&t.nodeSize?t.nodeSize:18,o=t&&t.nodeIcon?t.nodeIcon:null,s=(t&&t.nodeShape&&t.nodeShape,.5*l),r={label:{value:t&&t.labelPropertyKey&&e.properties[t.labelPropertyKey]?e.properties[t.labelPropertyKey]:e.id},keyshape:{size:l,stroke:n,fill:n,fillOpacity:.2,strokeOpacity:1}};return o&&(r.icon={type:"font",value:q[o],size:s,fill:n,fontFamily:"graphin"}),r}(e,t),Object.assign({},e)},$=function(e,t){return e.map(function(e,a){return X(e,t[e.label])})},ee=function(e,t){return e.map(function(e,a){return function(e,t){e.id&&(e.originalId=e.id,e.id=e.id.toString()),e.labelType=e.label,e.sourceOriginal=e.source,e.source=e.source.toString(),e.targetOriginal=e.target,e.target=e.target.toString(),e.style={};var a=t&&t.edgeColor?t.edgeColor:Q(e.label),n=t&&t.labelPropertyKey&&e.properties&&e.properties[t.labelPropertyKey]?e.properties[t.labelPropertyKey]:e.label;return e.style.label={value:n,fill:a,background:{fill:"#fff",radius:8,stroke:"#fff"},strokeOpacity:.2},e.style.keyshape={stroke:a},Object.assign({},e)}(e,t[e.label]||{})})},te=function(e,t,a){return{nodes:$(e.nodes,t),edges:ee(e.edges,a)}},ae=a(135);var ne=function(e){var t=Object(n.useContext)(h.a),a=t.apis,o=t.graph,s=l.a.useState([]),i=Object(r.a)(s,2),c=i[0],d=i[1];return l.a.createElement("div",{className:"rightModal bg-white",style:e.style},l.a.createElement(W.a,{className:"h-100"},l.a.createElement(W.a.Header,null,"Find and focus"),l.a.createElement(W.a.Body,{className:""},l.a.createElement(U.a.Control,{className:"mb-3",placeholder:"Search by label",onChange:function(e){return function(e){console.log(e);var t=o.findAll("node",function(t){return t.get("model").style.label.value.toString().match(new RegExp(e,"i"))});d(t)}(e.target.value)}}),c.length>0?l.a.createElement(W.a,null,l.a.createElement(ae.a,{variant:"flush"},c.map(function(e,t){var n=e.get("model");if(console.log("model+++",n),n)return l.a.createElement(ae.a.Item,{key:n.id,style:{cursor:"pointer",color:n.style.keyshape.stroke?n.style.keyshape.stroke:"auto"},onClick:function(){return e=n.id,void a.focusNodeById(e);var e}},n.style.icon?l.a.createElement("span",{className:"icon-foo me-1",style:{fontFamily:n.style.icon.fontFamily}},n.style.icon.value):l.a.createElement("span",null),n.style.label.value.toString())}))):l.a.createElement("span",null))))};var le=function(e){var t=Object(n.useContext)(h.a),a=(t.apis,t.graph);return l.a.createElement("div",{className:"rightModal bg-white",style:e.style},l.a.createElement(W.a,{className:"h-100"},l.a.createElement(W.a.Header,null,"Export canvas"),l.a.createElement(W.a.Body,{className:""},l.a.createElement(f.a,{className:"me-3",onClick:function(){return a.downloadImage("canvas.png","image/png")}},"PNG"),l.a.createElement(f.a,{className:"me-3",onClick:function(){return a.downloadImage("canvas.jpeg","image/jpeg","#ffffff")}},"JPEG"))))},oe=i.a.DragCanvas,se=i.a.ZoomCanvas,re=i.a.ClickSelect,ie=i.a.BrushSelect,ce=i.a.DragNode,de=i.a.LassoSelect,me=i.a.DragCombo,ue=i.a.ActivateRelations,pe=i.a.Hoverable,ge=c.a.MiniMap,ye=c.a.ContextMenu,he=c.a.SnapLine,fe={line:{stroke:"lightgreen",lineWidth:.5}};var Ee=function(e){var t=e.data,a=e.containerId,n=e.width,o=e.height,i=e.initState;console.log(t);var c=l.a.useState(i.layoutSettings),h=Object(r.a)(c,2),f=h[0],E=h[1],S=l.a.useState(i.selectedNodes),k=Object(r.a)(S,2),x=k[0],w=k[1],O=l.a.useState(i.messageText),I=Object(r.a)(O,2),F=I[0],j=I[1],M=l.a.useState(i.hoveredItem),T=Object(r.a)(M,2),L=T[0],z=T[1],A=l.a.useState(i.showDisplaySettings),H=Object(r.a)(A,2),_=H[0],B=H[1],R=l.a.useState(i.showFindAndFocus),K=Object(r.a)(R,2),J=K[0],W=K[1],G=l.a.useState(!1),U=Object(r.a)(G,2),Y=U[0],q=U[1],Q=l.a.useState(i.nodeDisplaySettings),X=Object(r.a)(Q,2),$=X[0],ee=X[1],ae=l.a.useState(i.edgeDisplaySettings),Ee=Object(r.a)(ae,2),ve=Ee[0],be=Ee[1],Se=te(t,i.nodeDisplaySettings,i.edgeDisplaySettings),Ne=new D(E,w,j,z,B,ee,be,W,q,f,x,F,L,$,ve,_,J,Y);return l.a.createElement("div",{className:"grid-plugin-container graph-canvas-container",style:{width:n,height:o,paddingTop:"30px"}},l.a.createElement(d.a,{data:Se,className:"graph-canvas",autoPaint:!0,layout:Object(s.a)({type:f.type},f.options),containerId:a,defaultNodeStyle:g},l.a.createElement(he,{options:fe,visible:!0}),l.a.createElement(m.a,null),l.a.createElement(ge,{options:y}),l.a.createElement(se,{enableOptimize:!0}),l.a.createElement(oe,null),l.a.createElement(se,null),l.a.createElement(ce,null),l.a.createElement(me,null),l.a.createElement(re,null),l.a.createElement(ie,null),l.a.createElement(ue,null),l.a.createElement(v,{selectedNodes:x,stateManager:Ne,style:{top:"10px",left:"15px",position:"absolute"}}),l.a.createElement(C,{stateManager:Ne}),l.a.createElement(ye,{style:{background:"#fff",maxHeight:"600px",width:"320px"},bindType:"node"},function(e){return l.a.createElement(p,e)}),l.a.createElement(de,null),l.a.createElement(pe,{bindType:"edge"}),l.a.createElement(pe,{bindType:"node"}),_?l.a.createElement(V,{nodeDisplaySettings:$,edgeDisplaySettings:ve,stateManager:Ne}):l.a.createElement("span",null),J?l.a.createElement(ne,{stateManager:Ne}):l.a.createElement("span",null),"  ",Y?l.a.createElement(le,{stateManager:Ne}):l.a.createElement("span",null),l.a.createElement(u.a,{style:{top:"-31px",left:"-1px"},options:Z,onChange:function(e,t){return N(e,t,Ne)}}),l.a.createElement(u.a,{style:{top:"-31px",right:"-1px"},options:P,onChange:function(e,t){return N(e,t,Ne)}}),l.a.createElement(b,{messageText:F,selectedNodes:x})))},ve=(a(399),a(225)),be=a(226);var Se=function(){return l.a.createElement("div",{className:"",style:{padding:"30px"}},l.a.createElement(Ee,{data:ve,initState:be,containerId:"graph-canvas",width:1280,height:920}))},Ne=document.getElementById("root");Object(o.createRoot)(Ne).render(l.a.createElement(n.StrictMode,null,l.a.createElement(Se,null)))}},[[231,2,1]]]);
//# sourceMappingURL=main.cb6abe71.chunk.js.map